â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         SOLUCIÃ“N DE ERROR CORS                                 â•‘
â•‘              "The given origin is not allowed for the given client ID"         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

í´´ PROBLEMA QUE TENÃAS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Error: Cross-Origin-Opener-Policy policy would block the window.postMessage call.
Error: Access to fetch blocked by CORS policy
Error: The given origin is not allowed for the given client ID.

CAUSA: El backend NO tenÃ­a CORS configurado correctamente para aceptar requests 
desde http://localhost:5173 (tu frontend)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… LO QUE ARREGLÃ‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£  INSTALÃ‰ CORS EN BACKEND
    â”œâ”€ npm install cors (ya estaba)
    â””â”€ npm install --save-dev @types/cors

2ï¸âƒ£  CONFIGURÃ‰ CORS EN backend/src/index.ts
    â”œâ”€ import cors from "cors"
    â”œâ”€ app.use(cors({
    â”‚   origin: ["http://localhost:3000", "http://localhost:5173", "http://localhost:5174"],
    â”‚   methods: ["GET", "POST", "PUT", "DELETE", "PATCH"],
    â”‚   credentials: true,
    â”‚   allowedHeaders: ["Content-Type", "Authorization"]
    â”‚ }))
    â””â”€ âœ… Ahora backend acepta requests desde frontend

3ï¸âƒ£  ACTUALICÃ‰ SOCKET.IO CORS
    â””â”€ cors: {
       origin: ["http://localhost:3000", "http://localhost:5173", "http://localhost:5174"],
       methods: ["GET", "POST"],
       credentials: true
     }

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
í´§ AHORA DEBES HACER EN GOOGLE CONSOLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Ve a: https://console.cloud.google.com/

2. Busca tu proyecto (busca el Client ID que usas: 907384023626-dc85nheco1hirprrbouf9cejvs3utekr)

3. Ve a "APIs & Services" â†’ "Credentials"

4. Haz click en tu OAuth 2.0 Client ID

5. En "Authorized JavaScript origins" agrega:
   âœ… http://localhost:3000
   âœ… http://localhost:5173
   âœ… http://localhost:5174

6. En "Authorized redirect URIs" asegÃºrate que estÃ¡:
   âœ… http://localhost:3000/api/auth/google/callback

7. Haz click en SAVE

8. â³ ESPERA 5-10 MINUTOS (Google tarda en propagar cambios)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
í³ VERIFICAR QUE TODO ESTÃ BIEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TERMINAL 1 - Backend:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
cd backend
npm run dev

TERMINAL 2 - Frontend:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
cd frontend/syncro-chat-front
npm run dev

NAVEGADOR - http://localhost:5173:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Abre DevTools (F12)
2. Ve a Console tab
3. Ejecuta:

fetch('http://localhost:3000/api/health')
  .then(r => r.json())
  .then(d => console.log("CORS OK:", d))
  .catch(e => console.error("CORS ERROR:", e))

âœ… Si ves "CORS OK: {...}" â†’ CORS funcionando
âŒ Si ves "CORS ERROR:" â†’ Algo sigue mal

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
í·ª PROBAR LOGIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. En http://localhost:5173, haz click en "Sign in with Google"

2. Autentica

3. En DevTools Console deberÃ­as ver:
   âœ… "1. Google nos autenticÃ³. Enviando token al backend..."
   âœ… "2. Backend respondiÃ³:" { ... }
   âœ… Redirige a /chat automÃ¡ticamente

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
í°› DEBUGGING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Si SIGUE sin funcionar, ejecuta en Console:

// 1. Verifica que Client ID estÃ© configurado
console.log("CLIENT_ID:", import.meta.env.VITE_GOOGLE_CLIENT_ID)

// 2. Verifica CORS del backend
fetch('http://localhost:3000/api/auth/google/login', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ token: 'test' })
})
.then(r => r.json())
.then(d => console.log("Response:", d))
.catch(e => console.error("Error:", e))

// 3. Abre DevTools â†’ Network tab
// Busca la request POST /api/auth/google/login
// Verifica que en Response Headers estÃ©:
// Access-Control-Allow-Origin: http://localhost:5173 âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
í³„ ARCHIVOS MODIFICADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… backend/src/index.ts
   â””â”€ Agregado import cors
   â””â”€ Agregado middleware app.use(cors(...))
   â””â”€ Actualizado Socket.IO cors config

í³š DOCUMENTACIÃ“N NUEVA:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… GOOGLE_OAUTH_CONFIG.md â†’ GuÃ­a completa de Google OAuth
âœ… check-config.sh â†’ Script para verificar configuraciÃ³n

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ¨ RESUMEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANTES:
  Backend NO tenÃ­a CORS â†’ Frontend no podÃ­a conectar

AHORA:
  Backend tiene CORS completo â†’ Frontend puede conectar

FALTA:
  Autorizar los orÃ­genes en Google Console (ya que cambiÃ© la URL del frontend)
  URL nuevo de frontend: http://localhost:5173 (antes era simulado)

PASOS FINALES:
  1. Ve a Google Console
  2. Autoriza localhost:5173
  3. Espera 10 minutos
  4. Reinicia Backend y Frontend
  5. Prueba login

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
